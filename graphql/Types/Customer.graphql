type Customer {
  id: ID!
  name: String!
  type: Type! @belongsTo
  type_id: ID!
  statuses: [Status]! @belongsToMany
  assets_count: Int!
  locations_count: Int!
  locations: [Location!]! @morphMany
  contacts_count: Int!
  contacts (
    where: ContactsQuery @searchBy
    order: ContactsSort @sortBy
  ): [Contact!]! @morphMany
  headquarter: Location @morphOne

  kpi: Kpi @morphOne

  # Contracts
  contracts (
    where: DocumentsQuery @searchBy
    order: DocumentsSort @sortBy
  ): [Document!]!
  @me(permissions: ["contracts-view", "customers-view"])
  @hasMany(type: PAGINATOR)

  # Quotes
  quotes (
    where: DocumentsQuery @searchBy
    order: DocumentsSort @sortBy
  ): [Document!]!
  @me(permissions: ["quotes-view", "customers-view"])
  @hasMany(type: PAGINATOR)

  # Assets
  assets(
    where: AssetsQuery @searchBy
    order: AssetsSort @sortBy
  ): [Asset!]!
  @me(permissions: ["assets-view", "customers-view"])
  @hasMany(type: PAGINATOR)

  assetsAggregate(
    where: AssetsQuery @searchBy
  ): AssetsAggregate!
  @me(permissions: ["assets-view", "customers-view"])
  @field(resolver: "App\\GraphQL\\Queries\\Customer@assetsAggregate")
}
